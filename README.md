# Hydride

Hydride is a retargetable synthesis-based compiler for modern hardware architectures.

Hydride has two major components:
- CodeGen Generator - It is responsible for automatically generating target-agnostic DSL in Rosette for synthesis, LLVM IR extensions and legalization code.
- Code Synthesizer - It leverages Rosette to synthesize tensor and stencil computations using the DSL automatically generated by the Backend.

## Prerequisites

### Python
- Install [Python](https://www.python.org/downloads/) > 3.0.

### Z3
- Install [z3](https://github.com/Z3Prover/z3):
    - MacOS: `brew install z3`
    - Linux example: `sudo apt-get install -y z3`

### LLVM
- Install [LLVM](https://github.com/llvm/llvm-project.git) >= 12.0:
    - Source: `git clone -b release/12.x https://github.com/llvm/llvm-project.git`

### Racket 
- Install [Racket](https://download.racket-lang.org/)
    - Linux example (works for all versions of Racket): 
    ```bash
    wget https://download.racket-lang.org/installers/8.6/racket-8.6-x86_64-linux-cs.sh
    sh racket-8.6-x86_64-linux-cs.sh
    ```

## Directory Structure (WIP)
- `code-syntheizer` contains the experimental files for adding the notion of cost for different benchmark kernels and code for grammar generator.
- `codegen-generator` contains the custom compiler to generate target-agnostic semantics for target ISAs in Rosette for synthesis, LLVM IR extensions and legalization code for generating low-level code executable on a given supported target.
- `rosette` is the modified version of Rosette necessary for Hydride.
- `llvmlite` is the modified version of llvmlite necessary for Hydride.
- `halide-hydride` is the modified version of Halide. Modifications to Halide required to integrate Hydride with Halide.
- `benchmarks` contains the benchmarks synthesized for which Hydride generates vector instructions. It also contains Halide basline kernels.

## Targets Supported (WIP)
- x86 (AVX, SSE, VNNI)
- Hexagon (HVX)
- ARM A64
